const tape = require("tape"),
      swoopy = require("../"),
      round = require("./utils/roundArray");

tape("cat(a, b) returns a catenary curve from point a to b ", test => {
  test.deepEqual(
    round(swoopy.cat([0, 0], [10, 0]), 3),
    round([ [ 0, 0 ], [ 1.25, 1.137 ], [ 2.5, 1.908 ], [ 3.75, 2.354 ], [ 5, 2.5 ], [ 6.25, 2.354 ], [ 7.5, 1.908 ], [ 8.75, 1.137 ], [ 10, 0 ] ], 3)
  );
  test.end();
});

tape("cat(a, b, offset) accepts offsets", test => {
  test.deepEqual(
    round(swoopy.cat([0, 0], [10, 0], -.5), 3),
    round([ [ 0, 0 ], [ 1.25, -1.137 ], [ 2.5, -1.908 ], [ 3.75, -2.354 ], [ 5, -2.5 ], [ 6.25, -2.354 ], [ 7.5, -1.908 ], [ 8.75, -1.137 ], [ 10, 0 ] ], 3)
  );
  test.deepEqual(
    round(swoopy.cat([0, 0], [10, 0], 0), 3),
    round([ [ 0, 0 ], [ 5, 0 ], [ 10, 0 ] ], 3)
  );
  test.deepEqual(
    round(swoopy.cat([0, 0], [10, 0], 1), 3),
    round([ [ 0, 0 ], [ 0.625, 1.355 ], [ 1.25, 2.435 ], [ 2.5, 3.934 ], [ 3.75, 4.744 ], [ 5, 5 ], [ 6.25, 4.744 ], [ 7.5, 3.934 ], [ 8.75, 2.435 ], [ 9.375, 1.355 ], [ 10, 0 ] ], 3)
  );
  test.deepEqual(
    round(swoopy.cat([0, 0], [10, 0], -1), 3),
    round([ [ 0, 0 ], [ 0.625, -1.355 ], [ 1.25, -2.435 ], [ 2.5, -3.934 ], [ 3.75, -4.744 ], [ 5, -5 ], [ 6.25, -4.744 ], [ 7.5, -3.934 ], [ 8.75, -2.435 ], [ 9.375, -1.355 ], [ 10, 0 ] ], 3)
  );
  test.end();
});

tape("cat(a, b, ..., precision) accepts precision", test => {
  test.deepEqual(
    round(swoopy.cat([0, 0], [10, 0], 0.5, 0.1), 3),
    round([ [ 0, 0 ], [ 1.25, 1.137 ], [ 2.5, 1.908 ], [ 3.75, 2.354 ], [ 5, 2.5 ], [ 6.25, 2.354 ], [ 7.5, 1.908 ], [ 8.75, 1.137 ], [ 10, 0 ] ], 3)
  );
  test.deepEqual(
    round(swoopy.cat([0, 0], [10, 0], 0.5, 0.01), 3),
    round([ [ 0, 0 ], [ 0.313, 0.322 ], [ 0.625, 0.618 ], [ 0.938, 0.889 ], [ 1.25, 1.137 ], [ 1.563, 1.362 ], [ 1.875, 1.565 ], [ 2.188, 1.747 ], [ 2.5, 1.908 ], [ 3.125, 2.169 ], [ 3.75, 2.354 ], [ 4.375, 2.464 ], [ 5, 2.5 ], [ 5.625, 2.464 ], [ 6.25, 2.354 ], [ 6.875, 2.169 ], [ 7.5, 1.908 ], [ 7.813, 1.747 ], [ 8.125, 1.565 ], [ 8.438, 1.362 ], [ 8.75, 1.137 ], [ 9.063, 0.889 ], [ 9.375, 0.618 ], [ 9.688, 0.322 ], [ 10, 0 ] ], 3)
  );
  test.deepEqual(
    round(swoopy.cat([0, 0], [10, 0], 0.5, 1), 3),
    round([ [ 0, 0 ], [ 5, 2.5 ], [ 10, 0 ] ], 3)
  );
  test.end();
});